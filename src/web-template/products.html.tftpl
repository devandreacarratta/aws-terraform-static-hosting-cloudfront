<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>${shop_name} - Products</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <nav class="navbar">
        <div class="nav-brand">
          <h1>${shop_name}</h1>
        </div>
        <ul class="nav-menu">
          <li><a href="index.html">Home</a></li>
          <li><a href="products.html" class="active">Products</a></li>
          <li><a href="products-adv.html">Advanced Products</a></li>
          <li><a href="product-add.html">Add Product</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <section class="page-header">
        <div class="container">
          <h2>${products_title}</h2>
          <p>${products_subtitle}</p>
        </div>
      </section>

      <section class="products">
        <div class="container">
          <div class="loading" id="loading">
            <p>${loading_text}</p>
          </div>

          <div class="products-grid" id="products-container">
            <!-- Products will be loaded from Lambda -->
          </div>

          <div class="error-message" id="error-message" style="display: none">
            <p>${error_loading_products}</p>
            <button onclick="loadProducts()" class="btn btn-primary">
              ${retry_text}
            </button>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="container">
        <p>&copy; ${current_year} ${shop_name}. ${rights_reserved}</p>
        <p class="kiro-credit">
          Generated by
          <a href="https://kiro.dev" target="_blank" rel="noopener">kiro.dev</a>
        </p>
      </div>
    </footer>

    <script>
      const LAMBDA_URL = "${lambda_url}";

      async function loadProducts() {
        const loading = document.getElementById("loading");
        const container = document.getElementById("products-container");
        const errorMessage = document.getElementById("error-message");

        loading.style.display = "block";
        errorMessage.style.display = "none";
        container.innerHTML = "";

        try {
          const response = await fetch(LAMBDA_URL);
          if (!response.ok) throw new Error("${network_error}");

          const products = await response.json();
          loading.style.display = "none";

          if (products.length === 0) {
            container.innerHTML =
              '<p class="no-products">${no_products_found}</p>';
            return;
          }

          products.forEach((product) => {
            const productCard = document.createElement("div");
            productCard.className = "product-card";
            productCard.innerHTML = `
                        <div class="product-image">
                            <img src="` + (product.image || "${default_product_image}") + `" alt="` + product.name + `">
                        </div>
                        <div class="product-info">
                            <h3>` + product.name + `</h3>
                            <p class="product-description">` + product.description + `</p>
                            <p class="product-price">${currency_symbol}` + product.price + `</p>
                            <button class="btn btn-primary">${add_to_cart_text}</button>
                        </div>
                    `;
            container.appendChild(productCard);
          });
        } catch (error) {
          loading.style.display = "none";
          errorMessage.style.display = "block";
          console.error("Error loading products:", error);
        }
      }

      // Load products when page loads
      document.addEventListener("DOMContentLoaded", loadProducts);
    </script>
  </body>
</html>
